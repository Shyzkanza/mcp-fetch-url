# Gestion des Versions

## üö® R√®gle Critique

**TOUJOURS v√©rifier la coh√©rence des versions AVANT un commit.**

## Fichiers √† Synchroniser

La version doit √™tre identique dans :

1. **`package.json`** - `"version": "X.Y.Z"`
2. **`src/servers/http.ts`** - Dans `createMcpServer()` et `/health`
3. **Branche git** - `develop` pour le d√©veloppement, `main` pour les releases

## Documentation √† V√©rifier

Apr√®s changement de version ou fonctionnalit√©s :

- **`README.md`** - V√©rifier que les exemples et la doc sont √† jour
  - ‚ö†Ô∏è **Badge version** : `[![npm version](https://img.shields.io/badge/npm-vX.Y.Z-blue)](https://www.npmjs.com/package/@shyzus/mcp-scrapidou)`
- **`CONTEXT.md`** - Ajouter entr√©e changelog
- **`COMMANDS.md`** - Si nouvelles commandes ajout√©es

## Checklist Pr√©-Commit

```bash
# V√©rifier la coh√©rence
grep -n '"version"' package.json | head -1
grep -n "version:" src/servers/http.ts
git branch --show-current
```

Les 3 valeurs doivent correspondre !

## Quand Incr√©menter

| Type de changement | Incr√©ment |
|----|-----|
| Fix mineur | Patch (1.0.X) |
| Nouvelle feature | Minor (1.X.0) |
| Breaking change | Major (X.0.0) |

## Workflow Git avec Develop

1. D√©velopper sur `develop`
2. **AVANT release** : v√©rifier que la version est √† jour partout
3. Cr√©er MR `develop` ‚Üí `main` avec titre `Release X.Y.Z`
4. Apr√®s validation MR : Merger avec **SQUASH** dans `main`
5. Cr√©er tag `X.Y.Z`
6. Synchroniser `main` ‚Üí `develop` (merge normal)

## Commande Utile

```bash
# V√©rifier toutes les versions d'un coup
echo "Package: $(grep '"version"' package.json | head -1)" && \
echo "HTTP Server: $(grep "version:" src/servers/http.ts | head -2)" && \
echo "Branch: $(git branch --show-current)"
```
